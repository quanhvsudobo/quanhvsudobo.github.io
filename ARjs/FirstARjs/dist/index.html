<script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
<body style='margin : 0px; overflow: hidden;'>
  <a-scene embedded arjs='sourceType: webcam;'>
    <!-- handle marker with your own pattern -->
    <a-marker type='pattern' url='assets/files/pattern-quan2.patt'>
      <!-- <a-box position='0 0.5 0' material='color: red;'></a-box> -->
      <!-- <a-plane position="0 0.5 0" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane> -->
      <!-- <a-entity geometry="primitive: box; width: 3" material="color: red">
        <a-image src="assets/files/pattern-quan2.png">
      </a-entity> -->
      
      <!-- IMAGE -->
      <!-- <a-entity rotation="-90 0 0">
        <a-image src="assets/files/pattern-quan2-2.png">
      </a-entity>
 -->

      <!-- Video  -->
      <video id="penguin-sledding" loop="true" src="assets/files/video-pattern-2.mp4"></video>
      <a-entity scale="1 1 1" rotation="-90 0 0">
        <!-- <video crossorigin="anonymous" id="BS0i6" autoplay loop="true" type="video/mp4" src="assets/files/video-pattern-2.mp4"> -->
          <a-video src="#penguin-sledding" position="0 0.5 0" rotation="-270 0 0" play="true" vidhandler></a-video>
          <a-box position='0 0.5 0' material='color: yellow; opacity: 0.5;'></a-box>
      </a-entity>
    </a-marker>

    <!-- add a simple camera -->
    <a-entity camera></a-entity>
  </a-scene>
  <script>
        var video_play = false;
        window.addEventListener('click', function () {
          var v = document.querySelector('#penguin-sledding');
          if(!video_play){
             v.play();
          } else {
             v.pause();
          }
          video_play = !video_play;
        });

        // AFRAME.registerComponent('vidhandler', {
        //   init: function () {
        //     this.toggle = false;
        //     document.querySelector("#penguin-sledding").pause(); //reference to the video
        //   },
        //   tick:function(){  
        //    if(document.querySelector("a-marker").object3D.visible == true){
        //      if(!this.toggle){
        //        this.toggle = true;
        //        document.querySelector("#penguin-sledding").play();
        //      }
        //    }else{
        //      this.toggle = false;
        //      document.querySelector("#penguin-sledding").pause();
        //    }
        //   }
        // });
      </script>
</body>
